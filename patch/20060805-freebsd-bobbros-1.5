diff --ignore-matching-lines=\$FreeBSD.*\$ --exclude=.swp --exclude=.*.sw* --exclude=.svn --exclude=work --exclude=admin -ruN /usr/ports/games/bubbros/Makefile ./Makefile
--- /usr/ports/games/bubbros/Makefile	Sat Jan 29 20:27:09 2005
+++ ./Makefile	Tue Aug 22 14:29:35 2006
@@ -6,7 +6,7 @@
 #
 
 PORTNAME=	bubbros
-PORTVERSION=	1.3
+PORTVERSION=	1.5
 CATEGORIES=	games
 MASTER_SITES=	${MASTER_SITE_SOURCEFORGE}
 MASTER_SITE_SUBDIR=	bub-n-bros
@@ -20,8 +20,6 @@
 USE_PYTHON=	yes
 USE_BZIP2=	yes
 
-DOC_FILES=	Introduction.html download.html help.html INSTALL.txt
-
 do-build:
 	# Compile the statesaver extension module
 	cd ${WRKSRC}/bubbob; ${PYTHON_CMD} setup.py build_ext -i
@@ -30,7 +28,7 @@
 
 do-install:
 	@${MKDIR} ${DATADIR}
-	(cd ${WRKSRC}; tar --exclude build -cf - bubbob common display http2 java metaserver BubBob.py) | \
+	(cd ${WRKSRC}; tar --exclude build --exclude "*.orig" -cf - bubbob common display http2 java metaserver BubBob.py) | \
 		(cd ${DATADIR}; tar --unlink -xf -)
 	@${PRINTF} "#!/bin/sh\ncd ${DATADIR} && \
 		exec ${PYTHON_CMD} ${DATADIR}/BubBob.py\n" > ${WRKDIR}/bubbros.sh
@@ -41,9 +39,8 @@
 post-install:
 .ifndef(NOPORTDOCS)
 	@${MKDIR} ${DOCSDIR}
-.for file in ${DOC_FILES}
-	@${INSTALL_DATA} ${WRKSRC}/${file} ${DOCSDIR}
-.endfor
+	(cd ${WRKSRC}/doc; tar -cf - .) | \
+		(cd ${DOCSDIR}; tar --unlink -xf -)
 .endif
 
 .include <bsd.port.mk>
diff --ignore-matching-lines=\$FreeBSD.*\$ --exclude=.swp --exclude=.*.sw* --exclude=.svn --exclude=work --exclude=admin -ruN /usr/ports/games/bubbros/distinfo ./distinfo
--- /usr/ports/games/bubbros/distinfo	Mon Jan 23 00:04:08 2006
+++ ./distinfo	Mon Aug  7 09:37:50 2006
@@ -1,3 +1,3 @@
-MD5 (bubbros-1.3.tar.bz2) = 2840d5b1b794fcd9ed45b189132980a3
-SHA256 (bubbros-1.3.tar.bz2) = dfd3efedc2359d29a78ac36ce533cb9a7979fc18467b125139b631f3bf896d5e
-SIZE (bubbros-1.3.tar.bz2) = 8438858
+MD5 (bubbros-1.5.tar.bz2) = 431fd06ba7f838f61c9200e291060365
+SHA256 (bubbros-1.5.tar.bz2) = 91db9aa59f2adcd6f79cff475b457901aea82ffe0ebc557012eb3a0a36a3b05b
+SIZE (bubbros-1.5.tar.bz2) = 8856240
diff --ignore-matching-lines=\$FreeBSD.*\$ --exclude=.swp --exclude=.*.sw* --exclude=.svn --exclude=work --exclude=admin -ruN /usr/ports/games/bubbros/files/patch-display-xshm.c ./files/patch-display-xshm.c
--- /usr/ports/games/bubbros/files/patch-display-xshm.c	Thu Jan  1 01:00:00 1970
+++ ./files/patch-display-xshm.c	Mon Aug  7 09:37:50 2006
@@ -0,0 +1,21 @@
+--- display/xshm.c.orig	Sat Feb  4 19:56:31 2006
++++ display/xshm.c	Sat Aug  5 00:51:20 2006
+@@ -1,7 +1,6 @@
+ #include <Python.h>
+ #include <sys/ipc.h>
+ #include <sys/shm.h>
+-#include <X11/X.h>
+ #include <X11/Xlib.h>
+ #include <X11/Xutil.h>
+ #include <X11/extensions/XShm.h>
+@@ -111,10 +110,6 @@
+ 	
+   /* Get memory address to segment: */
+   img->m_shminfo.shmaddr = (char *) shmat(img->m_shminfo.shmid, 0, 0);
+-
+-  /* Mark the segment as destroyable (it will be destroyed when this
+-     process terminates) */
+-  shmctl(img->m_shminfo.shmid, IPC_RMID, NULL);
+ 
+   /* Tell XServer that it may only read from it and attach to display: */
+   img->m_shminfo.readOnly = True;
diff --ignore-matching-lines=\$FreeBSD.*\$ --exclude=.swp --exclude=.*.sw* --exclude=.svn --exclude=work --exclude=admin -ruN /usr/ports/games/bubbros/pkg-plist ./pkg-plist
--- /usr/ports/games/bubbros/pkg-plist	Thu Jan 27 22:51:25 2005
+++ ./pkg-plist	Mon Aug  7 09:37:50 2006
@@ -59,7 +59,33 @@
 %%DATADIR%%/bubbob/ext5/image4.ppm
 %%DATADIR%%/bubbob/ext5/music.wav
 %%DATADIR%%/bubbob/ext5/ouch.wav
-%%DATADIR%%/bubbob/images.py
+%%DATADIR%%/bubbob/ext6/__init__.py
+%%DATADIR%%/bubbob/ext6/crash.wav
+%%DATADIR%%/bubbob/ext6/image1-0.ppm
+%%DATADIR%%/bubbob/ext6/image1-1.ppm
+%%DATADIR%%/bubbob/ext6/image1-2.ppm
+%%DATADIR%%/bubbob/ext6/image1-3.ppm
+%%DATADIR%%/bubbob/ext6/image1-4.ppm
+%%DATADIR%%/bubbob/ext6/image1-5.ppm
+%%DATADIR%%/bubbob/ext6/image1-6.ppm
+%%DATADIR%%/bubbob/ext6/image1-7.ppm
+%%DATADIR%%/bubbob/ext6/image1-8.ppm
+%%DATADIR%%/bubbob/ext6/image1-9.ppm
+%%DATADIR%%/bubbob/ext6/music.wav
+%%DATADIR%%/bubbob/ext7/__init__.py
+%%DATADIR%%/bubbob/ext7/fire.wav
+%%DATADIR%%/bubbob/ext7/hit.wav
+%%DATADIR%%/bubbob/ext7/image1-0.ppm
+%%DATADIR%%/bubbob/ext7/image1-1.ppm
+%%DATADIR%%/bubbob/ext7/image1-2.ppm
+%%DATADIR%%/bubbob/ext7/image1-3.ppm
+%%DATADIR%%/bubbob/ext7/image1-4.ppm
+%%DATADIR%%/bubbob/ext7/image1-5.ppm
+%%DATADIR%%/bubbob/ext7/image1-6.ppm
+%%DATADIR%%/bubbob/ext7/image1-7.ppm
+%%DATADIR%%/bubbob/ext7/image1-8.ppm
+%%DATADIR%%/bubbob/ext7/image1-9.ppm
+%%DATADIR%%/bubbob/ext7/music.wav
 %%DATADIR%%/bubbob/images/10000_0.ppm
 %%DATADIR%%/bubbob/images/10000_1.ppm
 %%DATADIR%%/bubbob/images/10000_2.ppm
@@ -131,6 +157,8 @@
 %%DATADIR%%/bubbob/images/70000_8.ppm
 %%DATADIR%%/bubbob/images/70000_9.ppm
 %%DATADIR%%/bubbob/images/big_bubble.ppm
+%%DATADIR%%/bubbob/images/big_bubble_2.ppm
+%%DATADIR%%/bubbob/images/black.ppm
 %%DATADIR%%/bubbob/images/blitzy.ppm
 %%DATADIR%%/bubbob/images/blitzy_angry.ppm
 %%DATADIR%%/bubbob/images/blitzy_shot.ppm
@@ -211,6 +239,7 @@
 %%DATADIR%%/bubbob/images/ghost.ppm
 %%DATADIR%%/bubbob/images/ghosty.ppm
 %%DATADIR%%/bubbob/images/ghosty_angry.ppm
+%%DATADIR%%/bubbob/images/glue.ppm
 %%DATADIR%%/bubbob/images/gramy.ppm
 %%DATADIR%%/bubbob/images/gramy_angry.ppm
 %%DATADIR%%/bubbob/images/hat1.ppm
@@ -247,14 +276,17 @@
 %%DATADIR%%/bubbob/images/springy_angry.ppm
 %%DATADIR%%/bubbob/images/star_large.ppm
 %%DATADIR%%/bubbob/images/sugar_pie_big.ppm
-%%DATADIR%%/bubbob/images/walls.ppm
 %%DATADIR%%/bubbob/images/water_flow.ppm
 %%DATADIR%%/bubbob/images/water_still.ppm
 %%DATADIR%%/bubbob/images/water_surface.ppm
 %%DATADIR%%/bubbob/images/yellow_Hurry_up.ppm
+%%DATADIR%%/bubbob/images.py
 %%DATADIR%%/bubbob/levels/Arena.bin
 %%DATADIR%%/bubbob/levels/CompactLevels.py
 %%DATADIR%%/bubbob/levels/HouseOfFun.bin
+%%DATADIR%%/bubbob/levels/Levels.bin
+%%DATADIR%%/bubbob/levels/LostLevels.bin
+%%DATADIR%%/bubbob/levels/README.txt
 %%DATADIR%%/bubbob/levels/RandomLevels.py
 %%DATADIR%%/bubbob/levels/rnglevel
 %%DATADIR%%/bubbob/levels/scratch.py
@@ -285,6 +317,7 @@
 %%DATADIR%%/bubbob/sprmap.py
 %%DATADIR%%/bubbob/statesaver.c
 %%DATADIR%%/bubbob/statesaver.so
+%%DATADIR%%/bubbob/test_rnglevel.py
 %%DATADIR%%/bubbob/tmp/pat00.ppm
 %%DATADIR%%/bubbob/tmp/pat01.ppm
 %%DATADIR%%/bubbob/tmp/pat02.ppm
@@ -395,30 +428,38 @@
 %%DATADIR%%/metaserver/metaclient.py
 %%DATADIR%%/metaserver/metaserver.py
 %%DATADIR%%/metaserver/metastruct.py
-@dirrm %%DATADIR%%/metaserver/
-@dirrm %%DATADIR%%/java/
-@dirrm %%DATADIR%%/http2/sf
-@dirrm %%DATADIR%%/http2/data
-@dirrm %%DATADIR%%/http2/
-@dirrm %%DATADIR%%/display/windows
-@dirrm %%DATADIR%%/display/
-@dirrm %%DATADIR%%/common/
-@dirrm %%DATADIR%%/bubbob/tmp
-@dirrm %%DATADIR%%/bubbob/sounds
-@dirrm %%DATADIR%%/bubbob/music
-@dirrm %%DATADIR%%/bubbob/levels
-@dirrm %%DATADIR%%/bubbob/images
-@dirrm %%DATADIR%%/bubbob/ext5
-@dirrm %%DATADIR%%/bubbob/ext4
-@dirrm %%DATADIR%%/bubbob/ext3
-@dirrm %%DATADIR%%/bubbob/ext2
-@dirrm %%DATADIR%%/bubbob/ext1
 @dirrm %%DATADIR%%/bubbob/doc/images
 @dirrm %%DATADIR%%/bubbob/doc
+@dirrm %%DATADIR%%/bubbob/ext1
+@dirrm %%DATADIR%%/bubbob/ext2
+@dirrm %%DATADIR%%/bubbob/ext3
+@dirrm %%DATADIR%%/bubbob/ext4
+@dirrm %%DATADIR%%/bubbob/ext5
+@dirrm %%DATADIR%%/bubbob/ext6
+@dirrm %%DATADIR%%/bubbob/ext7
+@dirrm %%DATADIR%%/bubbob/images
+@dirrm %%DATADIR%%/bubbob/levels
+@dirrm %%DATADIR%%/bubbob/music
+@dirrm %%DATADIR%%/bubbob/sounds
+@dirrm %%DATADIR%%/bubbob/tmp
 @dirrm %%DATADIR%%/bubbob
+@dirrm %%DATADIR%%/common
+@dirrm %%DATADIR%%/display/windows
+@dirrm %%DATADIR%%/display
+@dirrm %%DATADIR%%/http2/data
+@dirrm %%DATADIR%%/http2/sf
+@dirrm %%DATADIR%%/http2
+@dirrm %%DATADIR%%/java
+@dirrm %%DATADIR%%/metaserver
 @dirrm %%DATADIR%%
+%%PORTDOCS%%%%DOCSDIR%%/BubBob.py.1
+%%PORTDOCS%%%%DOCSDIR%%/Client.py.1
 %%PORTDOCS%%%%DOCSDIR%%/Introduction.html
+%%PORTDOCS%%%%DOCSDIR%%/Makefile
+%%PORTDOCS%%%%DOCSDIR%%/authors.html
+%%PORTDOCS%%%%DOCSDIR%%/bb.py.1
+%%PORTDOCS%%%%DOCSDIR%%/crazybonuses.html
 %%PORTDOCS%%%%DOCSDIR%%/download.html
 %%PORTDOCS%%%%DOCSDIR%%/help.html
-%%PORTDOCS%%%%DOCSDIR%%/INSTALL.txt
+%%PORTDOCS%%%%DOCSDIR%%/sshots.html
 %%PORTDOCS%%@dirrm %%DOCSDIR%%
