#! /usr/bin/python

import sys
import subprocess
import os

if os.path.exists("source"):
    sys.path.append("source")
else:
    sys.path.append(".")

import conf

docname = conf.master_doc

if len(sys.argv) > 1:
    docname = sys.argv[1]

os.makedirs("build/pdf")
output = "build/pdf/%s.pdf" % docname

args = [
            "wkhtmltopdf",
            "--footer-center", "[page]/[toPage]",
            "--print-media-type",
            "file://%s/build/html/%s.html" % (os.getcwd(), docname),
            output.encode('utf-8')
        ]
print " ".join(args)
p = subprocess.Popen(args, stdin=subprocess.PIPE)
p.stdin.close()
sys.exit(p.wait())
