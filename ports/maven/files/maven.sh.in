#!/bin/sh
#
# $FreeBSD$

FOREHEAD_VERSION="1.0-beta-5"

if [ -z "${MAVEN_OPTS}" ] ; then
	MAVEN_OPTS="-Xmx256m"
fi

if [ -f /etc/mavenrc ] ; then
	. /etc/mavenrc
fi

if [ -f "${HOME}/.mavenrc" ] ; then
	. "${HOME}/.mavenrc"
fi

MAVEN_HOME="${MAVEN_HOME:-"%%DATADIR%%"}"
JAVA_HOME="${JAVA_HOME:-"%%JAVA_HOME%%"}"
MAVEN_ENDORSED="${JAVA_HOME}/lib/endorsed:${MAVEN_HOME}/lib/endorsed"
TOOLS_JAR="${JAVA_HOME}/lib/tools.jar"
MAIN_CLASS="com.werken.forehead.Forehead"

if [ -n "${MAVEN_HOME_LOCAL}" ]; then
	MAVEN_OPTS="${MAVEN_OPTS} -Dmaven.home.local=${MAVEN_HOME_LOCAL}" 
fi
  
JAVA_HOME="${JAVA_HOME}" \
	exec "%%LOCALBASE%%/bin/java" \
	${MAVEN_OPTS} \
	"-Djavax.xml.parsers.SAXParserFactory=org.apache.xerces.jaxp.SAXParserFactoryImpl" \
	"-Djavax.xml.parsers.DocumentBuilderFactory=org.apache.xerces.jaxp.DocumentBuilderFactoryImpl" \
	"-Djava.endorsed.dirs=${MAVEN_ENDORSED}" \
	-classpath "${MAVEN_HOME}/lib/forehead-${FOREHEAD_VERSION}.jar" \
	"-Dforehead.conf.file=${MAVEN_HOME}/bin/forehead.conf"  \
	"-Dtools.jar=${TOOLS_JAR}" \
	"-Dmaven.home=${MAVEN_HOME}" \
	"${MAIN_CLASS}" "$@"
